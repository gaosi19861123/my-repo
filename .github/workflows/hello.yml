name: Hello                       # ワークフロー名
run-name: Run by ${github.actor}   # 実行名
on: 
  push:                          # イベント（プッシュ時に起動）

jobs:                             # ジョブの定義
  hello:                          # ジョブID
    runs-on: ubuntu-latest
    env:
      USERNAME: ${{ vars.USERNAME }}
      PASSWORD: ${{ secrets.PASSWORD }}
    steps:                        # ステップの定義
      - name: Checkout
        uses: actions/checkout@v4 # アクションの呼び出し
      - name: Hello
        run: echo "Hello, world"  # シェルコマンドの実行
      - name: print
        run: echo "username:${USERNAME}"
      - name: print password with mask
        run: echo "password:${PASSWORD}"
      - name: print password without mask
        run: echo "password:${PASSWORD:0:1} ${PASSWORD#?}"
  
      - name: print env
        run: printenv | grep 'LITERAL_'
        env: 
          LITERAL_NULL: ${{ null }}
          LITERAL_BOOLEAN: ${{ true }}
          LITERAL_NUMBER: ${{ 123 }}
          LITERAL_STRING: ${{ 'Hello,world' }}
          LITERAL_OMIT_STRING: Hello

      - name: _FUNC
        run: printenv | grep '_FUNC'
        env:
          CONTAINS_FUNC: ${{ contains('Hello, world', 'world') }}
          ENDSWITH_FUNC: ${{ endswith('Hello, world', 'world') }}
          STARTSWITH_FUNC: ${{ startswith('Hello, world', 'Hello') }}
          INDEXOF_FUNC: ${{ indexof('Hello, world', 'world') }}
          JOIN_FUNC: ${{ join(',', 'Hello, world') }} # 配列を文字列に変換
          SPLIT_FUNC: ${{ split(',', 'Hello, world') }} # 文字列を配列に変換
          TRIM_FUNC: ${{ trim(' Hello, world ') }} # 前後の空白を削除
          LENGTH_FUNC: ${{ length('Hello, world') }} # 文字列の長さ
          SUBSTRING_FUNC: ${{ substring('Hello, world', 1, 5) }} # 部分文字列
          REPLACE_FUNC: ${{ replace('Hello, world', 'world', 'GitHub') }} # 文字列の置換
          MD5_FUNC: ${{ md5('Hello, world') }} # 文字列のMD5ハッシュ
          SHA256_FUNC: ${{ sha256('Hello, world') }} # 文字列のSHA256ハッシュ
      
  dump:
    runs-on: ubuntu-latest
    steps:
      - name: Json
        run: echo "${{ CONTEXT }}" 
        env:
          CONTEXT: ${{ toJSON(github) }}
        
      - name: Conditional
        run: echo "Hello, world" 
        if: ${{ contains(github.run_id, '1') }}

  skip-or-run:
    if: ${{ github.actor == 'octocat' }}
    runs-on: ubuntu-latest
    steps:
      - name: skip-or-run
        run: echo "Hello, world"